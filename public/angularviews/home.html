<section>
    <div data-ng-include data-src="'/angularviews/navbar.html'"></div>
    <div data-ng-include data-src="'/angularviews/login.html'"></div>
<!--     <div style="z-index: 4;"> -->
        <!--<div style="position: fixed; top: 3.5em;width:92.5%;background-color: aliceblue;left:50%;margin-right:-46.25%; transform: translate(-50%, 0%);z-index: 4;"><h4>Total Progress</h4></div>-->
<!--         <div class="progress" style="position: fixed; top: 19.5em; right: 0; height: 40px;width: 35%; z-index: 4;transform:rotate(-90deg) translate(0em, 9.5em);">
            <div class="progress-bar" id="TotalBar" role="progressbar" aria-valuenow="{{pointsEarned}}" aria-valuemin="0" aria-valuemax="240" style="width: 0%; position: fixed;height: 40px;overflow:hidden;z-index: 4">
            </div>
        </div>
        <div style="position: fixed; top: 19em; right: 0; height: 40px;width: 35%; z-index: 4;transform:rotate(-90deg) translate(-20.5em, 23em);">
            <div style="transform: rotate(90deg)">
                <p>Total: {{pointsEarned}}</p>
                <img src="{{statusImage}}" width="50" height="50" />
            </div>
        </div>
    </div> -->
    <!--<center>
        <ul id="filters">
            <li><input type="checkbox" ng-model="obj.easy" />Easy</li>
            <li><input type="checkbox" ng-model="obj.lowcost" />Low Cost</li>
            <li><input type="checkbox" ng-model="obj.visible" />Visible</li>
        </ul>
    </center>-->

<div id="wrapper">
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <center>
                <li class="sidebar-brand"><button class="btn btn-default cat-button" id="cat-total"> 
                    <div>Total <br><sup class="large-numerator">{{pointsEarned}}</sup>&frasl;<sub>100</sub>
                    </div>
                </button></li>
                <li ng-repeat="category in categoryKeys" class="sidebar-brand">
                    <button ng-if="standardsByCategory[category].value >= 10" class="btn btn-default cat-button cat-button-success" scroll-to="{{category}}" id="{{category}}Button"> 
                    <div>{{category}} </div><sup class="large-numerator">{{standardsByCategory[category].value}}</sup>&frasl;<sub>10</sub>
                    </button>
                    <button ng-if="standardsByCategory[category].value < 10" class="btn btn-default cat-button cat-button-danger" scroll-to="{{category}}" id="{{category}}Button"> 
                    <div>{{category}} </div><sup class="large-numerator">{{standardsByCategory[category].value}}</sup>&frasl;<sub>10</sub>
                    </button>
                </li>
            </center>
        </ul>
    </div>
    <div id="page-content-wrapper">
        <div class="page-content">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div style="width:92.5%" ng-repeat="category in categoryKeys">
                                    <div id="{{category}}" class="categoryhead" data-spy="affix" data-offset-top="125">
                                        {{category}}
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar {{widths[category].class || 'progress-bar-danger'}}" id="{{category}}Bar" role="progressbar" aria-valuenow="{{widths[category].valuenow}}" aria-valuemin="0" aria-valuemax="10" style="width:{{widths[category].width}}">{{widths[category].message}}</div>
                                    </div>
                                    <table class="table table-striped">
                                        <tr ng-repeat="standard in standardsByCategory[category].questions | tags:obj" style="border: 1px black solid;">
                                            <td style="width:40%; font-size: 1.4em;">
                                                {{$index + 1}}. {{standard.question | reinsertCommas}} <span class="glyphicon glyphicon-info-sign" ng-click="extraInfoModal(category, $index)"></span>
                                            </td>
                                            <td style="width: 10%">
                                                <center>{{carefulMultiply(standard.option, standard.percentage)}} points</center>
                                            </td>
                                            <td>
                                                <div class="col-md-4" style="font-size: 1.4em;" ng-repeat="option in standard.optionList">
                                                    <input type="radio" ng-model="standard.option" value="{{option.points}}" ng-change="computeScore(standard.category, option.points, $parent.$index, standard.percentage, standard.previousPoints)">{{option.text}}</input>
                                                </div>
                                                <div class="pull-right col-md-4">
                                                    <input ng-model="standard.percentage" size="3" ng-change="computePercentScore(standard.category, standard.option, $index, standard.percentage, standard.previousPoints)" />%
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                    <center> <button class='btn btn-primary' ng-click="progressModal()" style="width: 75%; position: fixed; bottom: 0px; right: 250px;">View Progress / Save</button> </center>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- 
    <div id='page-content-wrapper'>
        <div style="width:92.5%" ng-repeat="category in categoryKeys">
            <div id="{{category}}" class="categoryhead" data-spy="affix" data-offset-top="125">
                {{category}}
            </div>
            <div class="progress">
                <div class="progress-bar {{widths[category].class || 'progress-bar-danger'}}" id="{{category}}Bar" role="progressbar" aria-valuenow="{{widths[category].valuenow}}" aria-valuemin="0" aria-valuemax="10" style="width:{{widths[category].width}}">{{widths[category].message}}</div>
            </div>
            <table class="table table-striped">
                <tr ng-repeat="standard in standardsByCategory[category].questions | tags:obj" style="border: 1px black solid;">
                    <td style="width:40%; font-size: 1.4em;">
                        {{$index + 1}}. {{standard.question | reinsertCommas}} <span class="glyphicon glyphicon-info-sign" ng-click="extraInfoModal(category, $index)"></span>
                    </td>
                    <td style="width: 10%">
                        <center>{{carefulMultiply(standard.option, standard.percentage)}} points</center>
                    </td>
                    <td>
                        <div class="col-md-4" style="font-size: 1.4em;" ng-repeat="option in standard.optionList">
                            <input type="radio" ng-model="standard.option" value="{{option.points}}" ng-change="computeScore(standard.category, option.points, $parent.$index, standard.percentage, standard.previousPoints)">{{option.text}}</input>
                        </div>
                        <div class="pull-right col-md-4">
                            <input ng-model="standard.percentage" size="3" ng-change="computePercentScore(standard.category, standard.option, $index, standard.percentage, standard.previousPoints)" />%
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div> -->


    <div class="modal fade" id="progressModal" tabindex="-1" role="dialog" aria-labelledby="progressModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <span ng-show="showProgressError" class="error">{{progressError}}</span>
                <button class="btn btn-default " ng-click="save()">Save Progress</button>
            </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="extraInfoModal" tabindex="-1" role="dialog" aria-labelledby="extraInfoModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <!-- Bottom accordion drop down-->
                    <div ng-repeat="etc in etcKeys" class="container-fluid etcetera">
                        <h3 class="row etcheader roundTop" ng-class='{"round":!etcs[etc].open}' ng-click="etcs[etc].open = !etcs[etc].open;">
                            {{etcs[etc].header}}
                        </h3>
                        <div class="row etcbody roundBottom" ng-show="etcs[etc].open" style="font-size: 1.1em">
                            {{modalStandard[etc].message | reinsertCommas}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>