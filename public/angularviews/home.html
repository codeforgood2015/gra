<section>
    <div data-ng-include data-src="'/angularviews/navbar.html'"></div>
    <div data-ng-include data-src="'/angularviews/login.html'"></div>
    <h2>Welcome to Green My Restaurant!</h2>
    <div class="progress">
        <div class="progress-bar progress-bar-success" id="TotalBar" role="progressbar" aria-valuenow="{{pointsEarned}}" aria-valuemin="0" aria-valuemax="240" style="width: 0%">
        </div>
    </div>
    <div ng-repeat="category in categoryKeys">
        <div id="{{category}}" class="categoryhead" data-spy="affix" data-offset-top="125">
            {{category}}
            <!--<div class="progress">
                <div class="progress-bar progress-bar-danger" id="{{category}}Bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10"></div>
                <span>{{category}}</span>
            </div>-->
        </div>
        <table>
            <tr ng-repeat="standard in standardsByCategory[category]">
                <td style="width:40%; font-size: 1.4em;">
                    {{standard.question | reinsertCommas}}
                </td>
                <td style="width: 10%">

                </td>
                <td>    
                    <div class="col-md-4" style="font-size: 1.4em;" ng-repeat="option in standard.optionList">
                        <input type="radio" ng-model="standard.option" value="{{option.points}}" ng-change="computeScore(standard.category, option.points, $parent.$index, standard.percentage, standard.previousPoints)">{{option.text}}</input>
                    </div>
                    <div class="pull-right col-md-4">
                        <input ng-model="standard.percentage" size="3" ng-change="computePercentScore(standard.category, standard.option, $index, standard.percentage, standard.previousPoints)" />%
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <center <button class='btn btn-primary' ng-click="progressModal()" style="width: 90%; position: fixed; bottom: 0px;">View Progress and Save</button> </center>

    <div class="modal fade" id="progressModal" tabindex="-1" role="dialog" aria-labelledby="progressModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <span ng-show="showProgressError" class="error">{{showProgressError}}</span>
                <button class="btn btn-default " ng-click="save()">Save Progress</button>
            </div>
        </div>
      </div>
    </div>
</section>