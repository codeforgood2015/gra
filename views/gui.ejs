<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Green My Restaurant</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
	<link rel='stylesheet' href='/stylesheets/desktop.css' media="only screen and (min-width: 721px)"/>
	<link href="/stylesheets/mobile.css" rel="stylesheet" type="text/css" media="only screen and (max-width: 720px)" />
	<link rel = "stylesheet" href = "../owl-carousel/owl.carousel.css">
	<link rel = "stylesheet" href = "../owl-carousel/owl.theme.css">
	<script src = "../owl-carousel/owl.carousel.js"></script>

    <script src = "../babylon.js"></script>

    <!-- Custom styles for this template -->
    <link href="/stylesheets/base.css" rel="stylesheet">
  </head>
  <body ng-app="guiApp">
	<div data-ng-include data-src="'/angularviews/navbar.html'"></div>
    <div data-ng-include data-src="'/angularviews/login.html'"></div>
	<div class="container-fluid">

    <div id="buttonCarousel" class="owl-carousel sliderButtons"  aria-label = "...">
      <div class = "sliderButton">
        <img src="../carouselImages/rsz_disposables.jpg">
          <h4>Disposables</h4>
      </div>
      <div class = "sliderButton">
        <img src="../carouselImages/rsz_energy.jpg">
          <h4>Energy</h4>
      </div>
      <div class = "sliderButton">
        <img src="../carouselImages/rsz_food.png">
          <h4>Food</h4>
      </div>

      <div class="sliderButton">
        <img src="../carouselImages/rsz_furnishings.png">
          <h4>Furnishings</h4>
      </div>

      <div class="sliderButton">
        <img src="../carouselImages/rsz_pollution.jpg">
          <h4>Pollution</h4>
      </div>

      <div class="sliderButton">
        <img src="../carouselImages/rsz_waste.jpg">
          <h4>Waste</h4>
      </div>

      <div class="sliderButton">
        <img src="../carouselImages/rsz_water.jpg">
          <h4>Water</h4>
      </div>
    </div>
                
    <div class="col-md-8 col-sm-8" id="guiDiv">
      <div id="centerColumn">
				<div class="row">
					<div id="graphicsDiv" class = "btn-group" role = "group" aria-label = "...">
            <div id = "buttons" class = "btn-group-vertical" role = "group" aria-label="...">
              <div id = "settings" class="btn-group" role="group">
                <button type="button" class="btn btn-default dropdown-toggle button graphicsButton" data-toggle="dropdown" aria-expanded="false">
                  <span class="glyphicon glyphicon-cog"></span>
                  Settings
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="#" data-toggle="modal" data-target="#tutorialModal">View Tutorial</a></li>
                  <li><a href="#">Other things</a></li>
                  <li><a href="#">Other other things</a></li>
                </ul>
            </div>
							<button id = "diningRoomButton" type = "button" class = "btn btn-default button graphicsButton">Dining Room</button>

							<button id = "restroomButton" type = "button" class = "btn btn-default button graphicsButton">Restroom</button>

              <button id = "kitchenButton" type = "button" class = "btn btn-default button graphicsButton">Kitchen</button>

              <button id = "storageButton" type = "button" class = "btn btn-default button graphicsButton">Storage</button>

              <button id = "utilityButton" type = "button" class = "btn btn-default button graphicsButton">Utility</button>

              <button id = "officeButton" type = "button" class = "btn btn-default button graphicsButton">Office</button>
            </div>
            <script>
               $(document).ready(function(){
                      $("#buttonCarousel").owlCarousel({
                            items: 7,
                            itemsDesktop : [1000,7], //5 items between 1000px and 901px
                            itemsDesktopSmall : [900,5], // betweem 900px and 601px
                            itemsTablet: [600,3], //2 items between 600 and 0
                            itemsTabletSmall: [400, 2],
                            itemsMobile : [200, 1] // itemsMobile disabled - inherit from itemsTablet
                        })
                   });
            </script>
						<canvas id="renderCanvas"></canvas>
					</div>
				</div>
            </div>
        </div>
		<div class="col-md-4 col-sm-8" style="padding: 1em; position: relative;"> 
			<div class="progress progress-category">
				<div class="progress-bar progress-bar-danger" id="DisposBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="{{minRequired}}" style="width: 0%"></div>
				<div class="progress-text" id="DisposBarAfter">
					<a href="/gui/#/Disposables">Disposables</a>
				</div>
			</div>
			<div class="progress progress-category">
				<div class="progress-bar progress-bar-danger" id="EnergyBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" style="width: 0%"></div>
				<div class="progress-text" id="EnergyBarAfter">
					<a href="/gui/#/Energy">Energy</a>
				</div>
			</div>
			<div class="progress progress-category">
				<div class="progress-bar progress-bar-danger" id="FoodBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" style="width: 0%"></div>
				<div class="progress-text" id="FoodBarAfter">
					<a href="/gui/#/Food">Food</a>
				</div>
			</div>
			<div class="progress progress-category">
				<div class="progress-bar progress-bar-danger" id="FurnisBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" style="width: 0%"></div>
				<div class="progress-text" id="FurnisBarAfter">
					<a href="/gui/#/Sustainable Furnishings & Building Materials">Furnishings and Building Mat.</a>
				</div>
			</div>
			<div class="progress progress-category">
				<div class="progress-bar progress-bar-danger" id="PollutBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" style="width: 0%"></div>
				<div class="progress-text" id="PollutBarAfter">
					<a href="/gui/#/Pollution & Chemical Reduction">Poll. & Chem .Reduction</a>
				</div>
			</div>
			<div class="progress progress-category">
				<div class="progress-bar progress-bar-danger" id="WasteBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" style="width: 0%"></div>
				<div class="progress-text" id="WasteBarAfter">
					<a href="/gui/#/Waste">Waste</a>
				</div>
			</div>
			<div class="progress progress-category">
				<div class="progress-text">
					<a href="/gui/#/Water">Water</a>
				</div>
				<div class="progress-bar progress-bar-danger" id="Water" role="progressbar" aria-valuenow="{{pointsEarned}}" aria-valuemin="0" aria-valuemax="10" style="width: 0%"></div>
			</div>
		</div>
		<div class="col-md-8 col-sm-8">
			<div ng-view></div>
		</div>
    </div>

	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-route.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-animate.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-cookies.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
	<script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.4.0.js"></script>
	<script src="/javascripts/angularApp/guiApp.js"></script>
	<script src="/javascripts/angularApp/guiController.js"></script>
	<script src="/javascripts/angularApp/categoryController.js"></script>
	<script>
        if (BABYLON.Engine.isSupported()) {
            var canvas = document.getElementById("renderCanvas");
            var engine = new BABYLON.Engine(canvas, true);

            BABYLON.SceneLoader.Load("", "../babylon/DemoRestaurant.babylon", engine, function (newScene) {
                // Wait for textures and shaders to be ready
                // console.log(newScene);
                newScene.executeWhenReady(function () {
                    // Attach camera to canvas inputs
                    newScene.activeCamera.attachControl(canvas);
                    var camera = newScene.activeCamera;
                    var initialCameraPosition = camera.position;
                    var initialCameraRotation = camera.cameraRotation;
                    var initialCameraFOV = camera.fov;
                    // camera.position.z = 5;

                    canvas.addEventListener("click", function(){
                        var pickResult = newScene.pick(newScene.pointerX, newScene.pointerY);
                        console.log('mesh name: ' + pickResult.pickedMesh.name);
                        console.log('cameraInfo: ' + camera.cameraRotation);
                        console.log('cameraPosition: ' + camera.position);
                        // console.log('initialCameraInfo: '+ initialCameraRotation.z);
                      });

                    var updatePosition = function(x,y,z, roomName){
                      camera.position.x = newScene.getMeshByName(roomName).position.x;
                      camera.position.y = 6;
                      camera.position.z = newScene.getMeshByName(roomName).position.z;
                    }

                    $('#diningRoomButton').click(function() {
                      updatePosition(13, 6, 15, "Dining Room");
                    });
                    $('#restroomButton').click(function() {
                      updatePosition(-13, 6, 13, "Restroom");
                    });
                    $('#kitchenButton').click(function(){
                      updatePosition(10, 6, -20, "Kitchen");
                    })
                    $('#officeButton').click(function(){
                      updatePosition(10, 6, -5, "Office");
                    })
                    $('#utilityButton').click(function(){
                      updatePosition(5, 6, 13, "Utility");
                    })
                    $('#storageButton').click(function(){
                      updatePosition(15, 6, 13, "Storage");
                    })

                    // $(document).ready(function(){
                    //   $("#buttonCarousel").owlCarousel();
                    // });

                    // Once the scene is loaded, just register a render loop to render it
                    engine.runRenderLoop(function() {
                        newScene.render();
                    });
                    window.addEventListener("resize", function(){
                     engine.resize();
                    })
                });
            }, function (progress) {
                // To do: give progress feedback to user
            })    ;
        }
    </script>
  </body>
</html>